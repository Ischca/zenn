---
title: "Claude Code実践ガイド: MCPの活用と判断基準"
emoji: "🔌"
type: "tech"
topics: ["claudecode", "ai", "cli", "開発ツール", "mcp"]
published: false
---

## はじめに

MCPという言葉を見て「また新しい概念か」と思った方もいるかもしれません。正直なところ、使わなくても困らない場面の方が多いです。この記事では、MCPとは何か、どういう場面で使うかの判断基準を整理します。

## MCPとは

MCP（Model Context Protocol）は、AIモデルと外部システムを接続するためのプロトコルです。

[公式ドキュメント](https://code.claude.com/docs/en/overview)では次のように説明されています：

> Claude Codeは直接ファイルを編集し、コマンドを実行し、コミットを作成できます。もっと必要ですか？MCPを使えば、ClaudeはGoogle Driveの設計ドキュメントを読んだり、Jiraのチケットを更新したり、カスタムの開発ツールを使用したりできます。

[Anthropicのベストプラクティス](https://www.anthropic.com/engineering/claude-code-best-practices)では、MCPの設定方法について以下のように述べています：

> Claude Codeは MCPサーバーとクライアントの両方として機能します。クライアントとして、任意の数のMCPサーバーに接続してそのツールにアクセスできます：
> - プロジェクト設定（そのディレクトリでClaude Codeを実行するときに利用可能）
> - チェックインされた.mcp.jsonファイル（コードベースで作業する誰でも利用可能）

つまりMCPを使えば、Claude Codeの能力を外部サービスに拡張できます。

## MCPサーバーの例

よく使われるMCPサーバーの例：

- **Context7**：ライブラリやフレームワークの公式ドキュメントを取得
- **Chrome DevTools**：ブラウザとの連携、DOM操作
- **GitHub MCP**：GitHub APIとの連携
- **Database MCP**：データベースへのクエリ実行

## MCPを使うべき場面

### 複雑な操作の抽象化が必要なとき

単純なAPI呼び出しならCLIで十分ですが、複雑な操作の連携が必要な場合はMCPが有効です。

例：Figmaのデザインを取得し、それに基づいてコンポーネントを生成する

### ブラウザ操作が必要なとき

Chrome DevTools MCPを使えば、ブラウザとの連携が可能になります。E2Eテストのデバッグや、Webアプリの動作確認に使えます。

### 外部サービスとの深い統合が必要なとき

Slack、Jira、Notionなど、チームで使っているツールとの連携が必要な場合にMCPが有効です。

## MCPを使わないほうがよい場面

### CLIで十分な場合

[Anthropicのベストプラクティス](https://www.anthropic.com/engineering/claude-code-best-practices)では次のように述べています：

> gh（GitHub CLI）は、GitHub MCPサーバーよりも多くのケースで適しています。

GitHubの操作であれば、`gh`コマンドで十分なことが多いです。わざわざMCPを導入する必要はありません。

同様に：
- AWS操作 → `aws` CLI
- Kubernetes操作 → `kubectl`
- データベースクエリ → `psql`、`mysql`

既存のCLIツールで対応できるなら、そちらを使うほうがシンプルです。

### コンテキスト圧迫が懸念されるとき

MCPの結果もコンテキストを消費します。大量のデータを取得する操作では、コンテキストを圧迫して他の作業に影響が出る可能性があります。

### 権限管理が複雑になるとき

MCPサーバーに渡す権限を適切に制限する必要があります。過剰な権限を与えると、セキュリティリスクになります。

## MCPの設定方法

### プロジェクトレベルの設定

`.mcp.json`ファイルをリポジトリに配置します：

```json
{
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-context7"]
    }
  }
}
```

これをコミットすれば、リポジトリで作業する全員がMCPサーバーを使えます。

### ユーザーレベルの設定

`~/.claude/settings.json`に設定すると、全プロジェクトで使えます。

## MCP導入時の注意点

### 最小権限の原則

MCPサーバーには必要最小限の権限だけを与えます。「とりあえず全部許可」は避けます。

### 操作ログの確認

MCPを通じた操作は、何が行われたか確認できるようにしておきます。意図しない操作が行われていないか、定期的にチェックします。

### 承認フローの検討

重要な操作（本番環境への変更、決済関連など）は、自動実行せず承認フローを挟むことを検討します。

## 判断基準のまとめ

| 状況 | 推奨 |
|------|------|
| CLIで十分 | CLI使用（`gh`、`aws`など） |
| 複雑な操作の連携が必要 | MCP検討 |
| ブラウザ操作が必要 | MCP使用（Chrome DevTools） |
| 大量データの取得 | CLIまたはサブエージェントで分離 |
| 権限管理が複雑 | 慎重に検討、または使用しない |

## まとめ

- MCPはAIモデルと外部システムを接続するプロトコル
- Claude Codeの能力を外部サービスに拡張できる
- CLIで十分な場合はCLIを使う（`gh` > GitHub MCP）
- 複雑な操作の連携やブラウザ操作が必要な場合にMCPが有効
- 最小権限の原則を守り、操作ログを確認する
